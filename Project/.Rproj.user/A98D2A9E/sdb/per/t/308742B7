{
    "collab_server" : "",
    "contents" : "---\ntitle: \"Treatment of Severe Acute Malnutrition\"\noutput: html_document\n---\n\n```{r, include=FALSE}\nsetwd(\"C:/Users/crish/OneDrive/Documents/Columbia SIPA/2017 Spring/Data Visualization/Final Project/\")\n\nlibrary(leaflet)\nlibrary (raster)\nlibrary(rgdal)\nlibrary(RColorBrewer)\nlibrary(plotly)\nlibrary(devtools)\nlibrary(readr)\n\nsam <- readstata13::read.dta13(\"data/2015_SAM_TOTAL_codes.dta\")\n```\n\n\nGlobally the number of children admitted to SAM treatment programmes has increased steadily, from 1.4 million in 2009 to 3.53 million children in 2015. The rate of increase is slow compared with previous years.\n\n####Graph 1. Trends in global admissions to SAM programmes\n```{r, include=FALSE}\nsamadm <- c(1.4, 1.96 , 2.66, 2.91, 3.21, 3.5)\nyear <- c(\"2009\", \"2011\", \"2012\", \"2013\", \"2014\", \"2015\")\nSAMadm <- data.frame(samadm,year)\nnames(SAMadm) <- c(\"admissionSAM\",\"Year\")\n```\n\n```{r, echo=FALSE, message=FALSE, warning=FALSE}\nlibrary(plotly)\nplot_ly(SAMadm, x = ~Year, y=~admissionSAM, color = ~year, type = \"bar\", opacity=0.8)\n\n```\n\n##Coverage of SAM treatment per region\n\n```{r, include=FALSE}\nlibrary(raster)\nworld_spdf <- shapefile(\"C:/Users/crish/OneDrive/Documents/Columbia SIPA/2017 Spring/Data Visualization/Final Project/data/world_map/TM_WORLD_BORDERS_SIMPL-0.3.shp\")\n\n# Merge the QoG data to Shape Files\nlibrary(dplyr)\nsamburden <- world_spdf@data %>% left_join(sam, by = c(ISO3 = \"iso3\"))\nworld_spdf@data <- samburden\n\n```\n\nMore children are being treated for SAM than ever before: admissions increased from 3.2 million children from 57 countries in 2014 to 3.5 million children in 68 countries in 2015. However, there is still only a shocking one in five children with SAM receiving lifesaving care. \n\n\n\n\n####Map 1. Target and admissions of children 6 to 59 months old to SAM treatment, 2015\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}\n\nlibrary(leaflet)\nleaflet(world_spdf) %>% \n  addProviderTiles(\"Esri.WorldGrayCanvas\")  %>% \n  setView(lat=25, lng=2.8 , zoom=2) %>%\n  \n    # Base groups = Background layer\n    addTiles(group = \"OpenStreetMap\") %>%\n    #addProviderTiles(providers$Stamen.TonerLite, group = \"Toner Lite\") %>%\n    #addProviderTiles(providers$Stamen.Toner, group = \"Toner\")  %>%\n    \n    # Data Layers\n  addPolygons(group=\"Target Area\",\n                stroke = FALSE, fillOpacity = 1, smoothFactor = 0.5, \n                color = ~colorQuantile(\"Reds\", Burden_target)(Burden_target),\n                popup = paste(\"Country:\",world_spdf$NAME,\"<br/>\",\n                              \"Target Area:\", world_spdf$Burden_target,\"<br/>\")) %>%\n  addLegend(\"bottomright\", pal = colorNumeric(\"Reds\", world_spdf$Burden_target), \n            values = ~Burden_target, title = \"Target\", opacity = 1) %>%\n  \n  addPolygons(group=\"Admissions\",\n                stroke = FALSE, fillOpacity = 1, smoothFactor = 0.5, \n                color = ~colorQuantile(\"Greens\", Admission_newchild)(Admission_newchild),\n                popup = paste(\"Country:\",world_spdf$NAME,\"<br/>\",\n                              \"Admissions:\", world_spdf$Admission_newchild,\"<br/>\")) %>%\n  addLegend(\"bottomleft\", pal = colorNumeric(\"Greens\", world_spdf$Admission_newchild), \n            values = ~Admission_newchild, title = \"Admissions\", opacity = 1)%>%\n  \n    # Layers control\n    addLayersControl(\n    baseGroups = c(\"OpenStreetMap\"),\n    overlayGroups = c(\"Target Area\",\"Admissions\"),\n    options = layersControlOptions(collapsed =T))\n\n```\n\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE, fig.align='center'}\n\nburden <- c(10461,\t203754,\t2024390,\t39111,\t902309,\t5492273,\t2695617)\ntarget <- c(800,\t89129,\t1034644,\t24111,\t391753,\t439093,\t2019409)\nadmissions <- c(122,\t93934,\t855880,\t23505,\t373590,\t442076,\t1744458)\nregion <- c(\"CEECIS\", \"EAPRO\" , \"ESARO\" , \"LACRO\" , \"MENA\" , \"ROSA\" , \"WCARO\")\nburden_p <-\tc(3.83,\t3.78,\t32.93,\t2.88,\t61.79,\t31.71,\t34.29)\ntarget_p <-\tc(0.29,\t1.65,\t16.83,\t1.77,\t26.83,\t2.53,\t25.69)\nadmissions_p <-\tc(0.045,\t1.74,\t13.92,\t1.73,\t25.58,\t2.55,\t22.19)\n\ncoverage <- data.frame(burden, target, admissions, region, burden_p, target_p, admissions_p)\nnames(coverage) <- c( \"Region\", \"Estimated Burden\",\"Target Area\", \"Admissions\", \n                      \"% Estimated Burden\", \"% Target Area\", \"% Admissions\")\n\n```\n\nThe regional burden and targets, compared with admissions in 2015, make clear that there are still far too many children who require treatment but are being left behind. In Middle East and North Africa and South Asia the coverage rates are low.\n\n####Graph 2. Target and admissions of to SAM treatment. Percentage of children 6 to 59 months old, per region, 2015 \n```{r, echo=FALSE, message=FALSE, warning=F}\nlibrary(plotly)\nplot_ly(coverage, x = ~region, y = ~burden_p, type = 'bar', name = 'Burden (%)') %>%\n  add_trace(y = ~target_p, name = 'Target (%)') %>%\n  add_trace(y = ~admissions_p, name = 'Admissions (%)') %>%\n  layout(yaxis = list(title = 'Count'), barmode = 'group')\n\n```\n\n\n####Graph 3. Target and admissions of to SAM treatment. Number of children 6 to 59 months old, per region, 2015 \n\n```{r, echo=FALSE, message=FALSE, warning=F}\nlibrary(plotly)\nplot_ly(coverage, x = ~region, y = ~burden, type = 'bar', name = 'Burden (#)') %>%\n  add_trace(y = ~target, name = 'Target (#)') %>%\n  add_trace(y = ~admissions, name = 'Admissions (#)') %>%\n  layout(yaxis = list(title = 'Count'), barmode = 'group')\n```\n\n\n",
    "created" : 1494351917883.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "113651380",
    "id" : "308742B7",
    "lastKnownWriteTime" : 1494383412,
    "last_content_update" : 1494383412860,
    "path" : "C:/Users/crish/OneDrive/Documents/GitHub/Malnutrition/Project/SAM.Rmd",
    "project_path" : "SAM.Rmd",
    "properties" : {
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}